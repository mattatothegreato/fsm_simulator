<html>
	<head>
		<title>FSM UI Test</title>
		<link rel="stylesheet" href="jquery-ui-1.11.4.custom/jquery-ui.css">
		<link rel="stylesheet" href="style.css">
		<script src="jquery-ui-1.11.4.custom/external/jquery/jquery.js"></script>
		<script src="jquery-ui-1.11.4.custom/jquery-ui.js"></script>
		<script src="List.js"></script>
		<script src="FSM.js"></script>
		<script src="ui_fsm.js"></script>
		<script src="button_behavior.js"></script>
		<script type="text/javascript">
			function setup(){
				setupButtons();
				setupFSMUI();

				addToAlphabet("abcd");
			}

			$(function() {
				var dialog,  form,

				alphabet_characters = $("#alphabet_characters"),
				allFields = $([]).add(alphabet_characters),
				tips =  $(".validateTips");

			    function updateTips( t ) {
			      tips
			        .text( t )
			        .addClass( "ui-state-highlight" );
			      setTimeout(function() {
			        tips.removeClass( "ui-state-highlight", 1500 );
			      }, 500 );
			    }

			    function addAlphabet(){
			    	var valid = true;
			    	allFields.removeClass("ui-state-error");

			    	if(valid){
			    		addToAlphabet(alphabet_characters.val());
			    		dialog.dialog("close");
			    	}

			    	return valid;
			    }
		        dialog = $( "#dialog-form" ).dialog({
			      autoOpen: false,
			      height: 300,
			      width: 350,
			      modal: true,
			      buttons: {
			        "Add": addAlphabet,
			        Cancel: function() {
			          dialog.dialog( "close" );
			        }
			      },
			      close: function() {
			        form[ 0 ].reset();
			        allFields.removeClass( "ui-state-error" );
			      }
			    });
			 
			    form = dialog.find( "form" ).on( "submit", function( event ) {
			      event.preventDefault();
			      addUser();
			    });
			 
			    $( "#sigma" ).button().on( "click", function() {
			      dialog.dialog( "open" );
			    });
			})
		</script>	
	</head>
	<body onload="setup()">
		<div id="dialog-form" title="Edit Transition">
		  <form>
		    <fieldset>
		      <label for="characters">Add Characters to Alphabet:</label>
		      <input type="text" name="alphabet_characters" id="alphabet_characters" value="" class="text ui-widget-content ui-corner-all">
		 
		      <!-- Allow form submission with keyboard without duplicating the dialog button -->
		      <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
		    </fieldset>
		  </form>
		</div>

		<table id="left">
			<tr>
				<td id="alphabet_editing_container">
					<div id="alphabet_elements">
						<button id="sigma">Edit Alphabet</button>
						<span id="alphabet">ALPHABET &nbsp;</span>
					</div>
					<div id="editing_elements">
						<button id="add_state">Add State</button>
						<button id="add_transition">Add Transition</button>
						<button id="remove_state">Remove State</button>
					</div>
				</td>
			</tr>
			<tr>
				<td>
					<div class="canvas" id="mainCanvas">
					</div>
				</td>
			</tr>
			<tr>
				<td id="single_string_test_elements">
					<input type="text" id="input_string" value="Input String">
					<button id="play">Play String Test</button>
					<button id="step">Step String Test</button>
					<button id="check">Check String</button>
					<button id="add_string">Add String</button>
				</td>
			</tr>
		</table>
	</body>
</html>